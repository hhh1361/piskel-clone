!function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=8)}([function(e,t,r){"use strict";(function(e){r.d(t,"a",function(){return a}),r.d(t,"b",function(){return n}),r.d(t,"c",function(){return o});const a={state:"?",penSize:1,currentColor:"?",previousColor:"?",frames:{frame_0:"?"}},n=function(){const t=document.getElementById("instrumentsContainer");t.addEventListener("click",r=>{if("instruments"===r.target.className){for(let e=0;e<15;e++)t.children[e].className="instruments";r.target.className=`${r.target.className}Current`,a.state=r.target.innerHTML}e.console.log(a)})},o=function(){const t=document.getElementById("thickness");t.addEventListener("click",r=>{if("penSize"===r.target.className){for(let e=0;e<4;e++)t.children[e].className="penSize",t.children[e].children[0].className="square";r.target.className=`${r.target.className}Current`,r.target.children[0].className=`${r.target.children[0].className}Current`,a.penSize=+r.target.children[0].innerHTML}else if("square"===r.target.className){for(let e=0;e<4;e++)t.children[e].className="penSize",t.children[e].children[0].className="square";r.target.parentNode.className=`${r.target.parentNode.className}Current`,r.target.className=`${r.target.className}Current`,a.penSize=+r.target.innerHTML}e.console.log(a)})},i=document.getElementById("currentColor"),s=document.getElementById("previousColor"),c=document.getElementById("swapColor");i.addEventListener("click",t=>{"activate"!==i.state?(i.children[0].style.display="flex",i.state="activate"):(i.children[0].style.display="none",i.state="deactivate",a.previousColor=a.currentColor,a.currentColor=getComputedStyle(t.target).backgroundColor,i.style.backgroundColor=a.currentColor,s.style.backgroundColor=a.previousColor,e.console.log(a))}),s.addEventListener("click",t=>{"activate"!==s.state?(s.children[0].style.display="flex",s.state="activate"):(s.children[0].style.display="none",s.state="deactivate",a.previousColor=getComputedStyle(t.target).backgroundColor,s.style.backgroundColor=a.previousColor,e.console.log(a))}),c.addEventListener("click",()=>{const e=a.currentColor;a.currentColor=a.previousColor,a.previousColor=e,i.style.backgroundColor=a.currentColor,s.style.backgroundColor=a.previousColor})}).call(this,r(2))},function(e,t,r){"use strict";r.d(t,"b",function(){return n}),r.d(t,"c",function(){return o}),r.d(t,"a",function(){return i});var a=r(0);function n(e,t,r,n){for(let o=0;o<a.a.penSize;o++)for(let i=0;i<a.a.penSize;i++)e[t+o][r+i]={color:n}}function o(e,t,r,a){t.clearRect(0,0,a*r,a*r);for(let n=0;n<a;n++)for(let o=0;o<a;o++)"?"!==e[n][o].color&&(t.fillStyle=e[n][o].color,t.fillRect(o*r,n*r,r,r))}function i(e,t,r,n){e.fillStyle=n,e.fillRect(5*r,5*t,5*a.a.penSize,5*a.a.penSize)}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var a;!function(r,n,o,i){"use strict";var s,c,l={URL:r.URL||r.webkitURL||r.mozURL||r.msURL,getUserMedia:(c=o.getUserMedia||o.webkitGetUserMedia||o.mozGetUserMedia||o.msGetUserMedia,c?c.bind(o):c),requestAnimFrame:r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||r.msRequestAnimationFrame,requestTimeout:function(e,t){if(e=e||l.noop,t=t||0,!l.requestAnimFrame)return setTimeout(e,t);var r=(new Date).getTime(),a=new Object,n=l.requestAnimFrame;return a.value=n(function o(){(new Date).getTime()-r>=t?e.call():a.value=n(o)}),a},Blob:r.Blob||r.BlobBuilder||r.WebKitBlobBuilder||r.MozBlobBuilder||r.MSBlobBuilder,btoa:(s=r.btoa||function(e){for(var t="",r=0,a=e.length,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=void 0,i=void 0,s=void 0,c=void 0,l=void 0,d=void 0,f=void 0;r<a;)c=(o=e.charCodeAt(r++))>>2,l=(3&o)<<4|(i=e.charCodeAt(r++))>>4,d=(15&i)<<2|(s=e.charCodeAt(r++))>>6,f=63&s,isNaN(i)?d=f=64:isNaN(s)&&(f=64),t=t+n.charAt(c)+n.charAt(l)+n.charAt(d)+n.charAt(f);return t},s?s.bind(r):l.noop),isObject:function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},isEmptyObject:function(e){return l.isObject(e)&&!Object.keys(e).length},isArray:function(e){return e&&Array.isArray(e)},isFunction:function(e){return e&&"function"==typeof e},isElement:function(e){return e&&1===e.nodeType},isString:function(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)},isSupported:{canvas:function(){var e=n.createElement("canvas");return e&&e.getContext&&e.getContext("2d")},webworkers:function(){return r.Worker},blob:function(){return l.Blob},Uint8Array:function(){return r.Uint8Array},Uint32Array:function(){return r.Uint32Array},videoCodecs:function(){var e=n.createElement("video"),t={mp4:!1,h264:!1,ogv:!1,ogg:!1,webm:!1};try{e&&e.canPlayType&&(t.mp4=""!==e.canPlayType('video/mp4; codecs="mp4v.20.8"'),t.h264=""!==(e.canPlayType('video/mp4; codecs="avc1.42E01E"')||e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),t.ogv=""!==e.canPlayType('video/ogg; codecs="theora"'),t.ogg=""!==e.canPlayType('video/ogg; codecs="theora"'),t.webm=-1!==e.canPlayType('video/webm; codecs="vp8, vorbis"'))}catch(e){}return t}()},noop:function(){},each:function(e,t){var r=void 0,a=void 0;if(l.isArray(e))for(r=-1,a=e.length;++r<a&&!1!==t(r,e[r]););else if(l.isObject(e))for(r in e)if(e.hasOwnProperty(r)&&!1===t(r,e[r]))break},mergeOptions:function(e,t){if(l.isObject(e)&&l.isObject(t)&&Object.keys){var r={};return l.each(e,function(t,a){r[t]=e[t]}),l.each(t,function(a,n){var o=t[a];l.isObject(o)&&e[a]?r[a]=l.mergeOptions(e[a],o):r[a]=o}),r}},setCSSAttr:function(e,t,r){l.isElement(e)&&(l.isString(t)&&l.isString(r)?e.style[t]=r:l.isObject(t)&&l.each(t,function(t,r){e.style[t]=r}))},removeElement:function(e){l.isElement(e)&&e.parentNode&&e.parentNode.removeChild(e)},createWebWorker:function(e){if(!l.isString(e))return{};try{var t=new l.Blob([e],{type:"text/javascript"}),r=l.URL.createObjectURL(t);return{objectUrl:r,worker:new Worker(r)}}catch(e){return""+e}},getExtension:function(e){return e.substr(e.lastIndexOf(".")+1,e.length)},getFontSize:function(){var e=arguments.length>0&&arguments[0]!==i?arguments[0]:{};if(!n.body||!1===e.resizeFont)return e.fontSize;var t=e.text,r=e.gifWidth,a=parseInt(e.fontSize,10),o=parseInt(e.minFontSize,10),s=n.createElement("div"),c=n.createElement("span");for(s.setAttribute("width",r),s.appendChild(c),c.innerHTML=t,c.style.fontSize=a+"px",c.style.textIndent="-9999px",c.style.visibility="hidden",n.body.appendChild(c);c.offsetWidth>r&&a>=o;)c.style.fontSize=--a+"px";return n.body.removeChild(c),a+"px"},webWorkerError:!1},d=Object.freeze({default:l}),f={validate:function(e){e=l.isObject(e)?e:{};var t={};return l.each(f.validators,function(r,a){var n=a.errorCode;if(!e[n]&&!a.condition)return(t=a).error=!0,!1}),delete t.condition,t},isValid:function(e){var t=!0!==f.validate(e).error;return t},validators:[{condition:l.isFunction(l.getUserMedia),errorCode:"getUserMedia",errorMsg:"The getUserMedia API is not supported in your browser"},{condition:l.isSupported.canvas(),errorCode:"canvas",errorMsg:"Canvas elements are not supported in your browser"},{condition:l.isSupported.webworkers(),errorCode:"webworkers",errorMsg:"The Web Workers API is not supported in your browser"},{condition:l.isFunction(l.URL),errorCode:"window.URL",errorMsg:"The window.URL API is not supported in your browser"},{condition:l.isSupported.blob(),errorCode:"window.Blob",errorMsg:"The window.Blob File API is not supported in your browser"},{condition:l.isSupported.Uint8Array(),errorCode:"window.Uint8Array",errorMsg:"The window.Uint8Array function constructor is not supported in your browser"},{condition:l.isSupported.Uint32Array(),errorCode:"window.Uint32Array",errorMsg:"The window.Uint32Array function constructor is not supported in your browser"}],messages:{videoCodecs:{errorCode:"videocodec",errorMsg:"The video codec you are trying to use is not supported in your browser"}}},u=Object.freeze({default:f}),m=function(){},g={sampleInterval:10,numWorkers:2,filter:"",gifWidth:200,gifHeight:200,interval:.1,numFrames:10,frameDuration:1,keepCameraOn:!1,images:[],video:null,webcamVideoElement:null,cameraStream:null,text:"",fontWeight:"normal",fontSize:"16px",minFontSize:"10px",resizeFont:!1,fontFamily:"sans-serif",fontColor:"#ffffff",textAlign:"center",textBaseline:"bottom",textXCoordinate:null,textYCoordinate:null,progressCallback:m,completeCallback:m,saveRenderingContexts:!1,savedRenderingContexts:[],showFrameText:!0,crossOrigin:"Anonymous",waterMark:null,waterMarkHeight:null,waterMarkWidth:null,waterMarkXCoordinate:1,waterMarkYCoordinate:1},h=Object.freeze({default:g});function p(){return f.isValid()}function y(){var e,t,r,a,n,o=256,i=499,s=491,c=487,l=503,d=3*l,f=o-1,u=4,m=100,g=16,h=1<<g,p=10,y=10,v=h>>y,b=h<<p-y,C=6,x=(o>>3)*(1<<C),S=30,E=1024,k=256,M=1<<18,w=[],O=[],L=[],I=[];function N(e,t,r,a,i){var s,c,l,d,f,u,m;for((l=t-e)<-1&&(l=-1),(d=t+e)>o&&(d=o),s=t+1,c=t-1,u=1;s<d||c>l;){if(f=I[u++],s<d){m=n[s++];try{m[0]-=f*(m[0]-r)/M|0,m[1]-=f*(m[1]-a)/M|0,m[2]-=f*(m[2]-i)/M|0}catch(e){}}if(c>l){m=n[c--];try{m[0]-=f*(m[0]-r)/M|0,m[1]-=f*(m[1]-a)/M|0,m[2]-=f*(m[2]-i)/M|0}catch(e){}}}}function z(e,t,r,a,o){var i=n[t],s=e/E;i[0]-=s*(i[0]-r)|0,i[1]-=s*(i[1]-a)|0,i[2]-=s*(i[2]-o)|0}function F(e,t,r){var a,i,s,c,l,d,f,m,h,C;for(h=m=~(1<<31),f=d=-1,a=0;a<o;a++)(i=(C=n[a])[0]-e)<0&&(i=-i),(s=C[1]-t)<0&&(s=-s),i+=s,(s=C[2]-r)<0&&(s=-s),(i+=s)<m&&(m=i,d=a),(c=i-(O[a]>>g-u))<h&&(h=c,f=a),l=L[a]>>y,L[a]-=l,O[a]+=l<<p;return L[d]+=v,O[d]-=b,f}(function(e,i,s){var c,l;for(t=e,r=i,a=s,n=new Array(o),c=0;c<o;c++)n[c]=new Array(4),(l=n[c])[0]=l[1]=l[2]=(c<<u+8)/o|0,L[c]=h/o|0,O[c]=0}).apply(this,arguments);var B={map:function(e,t,r){var a,i,s,c,l,d,f;for(l=1e3,f=-1,i=(a=w[t])-1;a<o||i>=0;)a<o&&((s=(d=n[a])[1]-t)>=l?a=o:(a++,s<0&&(s=-s),(c=d[0]-e)<0&&(c=-c),(s+=c)<l&&((c=d[2]-r)<0&&(c=-c),(s+=c)<l&&(l=s,f=d[3])))),i>=0&&((s=t-(d=n[i])[1])>=l?i=-1:(i--,s<0&&(s=-s),(c=d[0]-e)<0&&(c=-c),(s+=c)<l&&((c=d[2]-r)<0&&(c=-c),(s+=c)<l&&(l=s,f=d[3]))));return f}};return B.process=function(){return function(){var n,o,f,g,h,p,y,v,b,M,w,O,L,B;for(r<d&&(a=1),e=30+(a-1)/3,O=t,L=0,B=r,M=(w=r/(3*a))/m|0,v=E,(y=(p=x)>>C)<=1&&(y=0),n=0;n<y;n++)I[n]=v*((y*y-n*n)*k/(y*y));for(b=r<d?3:r%i!=0?3*i:r%s!=0?3*s:r%c!=0?3*c:3*l,n=0;n<w;)if(z(v,o=F(f=(255&O[L+0])<<u,g=(255&O[L+1])<<u,h=(255&O[L+2])<<u),f,g,h),0!==y&&N(y,o,f,g,h),(L+=b)>=B&&(L-=r),0===M&&(M=1),++n%M==0)for(v-=v/e,(y=(p-=p/S)>>C)<=1&&(y=0),o=0;o<y;o++)I[o]=v*((y*y-o*o)*k/(y*y))}(),function(){var e;for(e=0;e<o;e++)n[e][0]>>=u,n[e][1]>>=u,n[e][2]>>=u,n[e][3]=e}(),function(){var e,t,r,a,i,s,c,l;for(c=0,l=0,e=0;e<o;e++){for(r=e,a=(i=n[e])[1],t=e+1;t<o;t++)(s=n[t])[1]<a&&(r=t,a=s[1]);if(s=n[r],e!=r&&(t=s[0],s[0]=i[0],i[0]=t,t=s[1],s[1]=i[1],i[1]=t,t=s[2],s[2]=i[2],i[2]=t,t=s[3],s[3]=i[3],i[3]=t),a!=c){for(w[c]=l+e>>1,t=c+1;t<a;t++)w[t]=e;c=a,l=e}}for(w[c]=l+f>>1,t=c+1;t<256;t++)w[t]=f}(),function(){for(var e=[],t=new Array(o),r=0;r<o;r++)t[n[r][3]]=r;for(var a=0,i=0;i<o;i++){var s=t[i];e[a++]=n[s][0],e[a++]=n[s][1],e[a++]=n[s][2]}return e}()},B}function v(){try{this.onmessage=function(t){var r,a=t.data||{};a.gifshot&&(r=e.run(a),postMessage(r))}}catch(e){}var e={dataToRGB:function(e,t,r){for(var a=t*r*4,n=0,o=[];n<a;)o.push(e[n++]),o.push(e[n++]),o.push(e[n++]),n++;return o},componentizedPaletteToArray:function(e){e=e||[];for(var t=[],r=0;r<e.length;r+=3){var a=e[r],n=e[r+1],o=e[r+2];t.push(a<<16|n<<8|o)}return t},processFrameWithQuantizer:function(e,t,r,a){for(var n=this.dataToRGB(e,t,r),o=new y(n,n.length,a),i=o.process(),s=new Uint32Array(this.componentizedPaletteToArray(i)),c=t*r,l=new Uint8Array(c),d=0,f=0;f<c;f++){var u=n[d++],m=n[d++],g=n[d++];l[f]=o.map(u,m,g)}return{pixels:l,palette:s}},run:function(e){var t=e=e||{},r=t.height,a=(t.palette,t.sampleInterval),n=t.width,o=e.data;return this.processFrameWithQuantizer(o,n,r,a)}};return e}function b(e,t,r,a){var n=0,o=(a=a===i?{}:a).loop===i?null:a.loop,s=a.palette===i?null:a.palette;if(t<=0||r<=0||t>65535||r>65535)throw"Width/Height invalid.";e[n++]=71,e[n++]=73,e[n++]=70,e[n++]=56,e[n++]=57,e[n++]=97;if(e[n++]=255&t,e[n++]=t>>8&255,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=0|(null!==s?128:0),e[n++]=0,e[n++]=0,null!==o){if(o<0||o>65535)throw"Loop count invalid.";e[n++]=33,e[n++]=255,e[n++]=11,e[n++]=78,e[n++]=69,e[n++]=84,e[n++]=83,e[n++]=67,e[n++]=65,e[n++]=80,e[n++]=69,e[n++]=50,e[n++]=46,e[n++]=48,e[n++]=3,e[n++]=1,e[n++]=255&o,e[n++]=o>>8&255,e[n++]=0}var c=!1;this.addFrame=function(t,r,a,o,l,d){if(!0===c&&(--n,c=!1),d=d===i?{}:d,t<0||r<0||t>65535||r>65535)throw"x/y invalid.";if(a<=0||o<=0||a>65535||o>65535)throw"Width/Height invalid.";if(l.length<a*o)throw"Not enough pixels for the frame size.";var f=!0,u=d.palette;if(u!==i&&null!==u||(f=!1,u=s),u===i||null===u)throw"Must supply either a local or global palette.";for(var m=function(e){var t=e.length;if(t<2||t>256||t&t-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return t}(u),g=0;m>>=1;)++g;m=1<<g;var h=d.delay===i?0:d.delay,p=d.disposal===i?0:d.disposal;if(p<0||p>3)throw"Disposal out of range.";var y=!1,v=0;if(d.transparent!==i&&null!==d.transparent&&(y=!0,(v=d.transparent)<0||v>=m))throw"Transparent color index.";if((0!==p||y||0!==h)&&(e[n++]=33,e[n++]=249,e[n++]=4,e[n++]=p<<2|(!0===y?1:0),e[n++]=255&h,e[n++]=h>>8&255,e[n++]=v,e[n++]=0),e[n++]=44,e[n++]=255&t,e[n++]=t>>8&255,e[n++]=255&r,e[n++]=r>>8&255,e[n++]=255&a,e[n++]=a>>8&255,e[n++]=255&o,e[n++]=o>>8&255,e[n++]=!0===f?128|g-1:0,!0===f)for(var b=0,C=u.length;b<C;++b){var x=u[b];e[n++]=x>>16&255,e[n++]=x>>8&255,e[n++]=255&x}n=function(e,t,r,a){e[t++]=r;var n=t++,o=1<<r,s=o-1,c=o+1,l=c+1,d=r+1,f=0,u=0;function m(r){for(;f>=r;)e[t++]=255&u,u>>=8,f-=8,t===n+256&&(e[n]=255,n=t++)}function g(e){u|=e<<f,f+=d,m(8)}var h=a[0]&s,p={};g(o);for(var y=1,v=a.length;y<v;++y){var b=a[y]&s,C=h<<8|b,x=p[C];if(x===i){for(u|=h<<f,f+=d;f>=8;)e[t++]=255&u,u>>=8,f-=8,t===n+256&&(e[n]=255,n=t++);4096===l?(g(o),l=c+1,d=r+1,p={}):(l>=1<<d&&++d,p[C]=l++),h=b}else h=x}g(h),g(c),m(1),n+1===t?e[n]=0:(e[n]=t-n-1,e[t++]=0);return t}(e,n,g<2?2:g,l)},this.end=function(){return!1===c&&(e[n++]=59,c=!0),n}}var C=function(){},x=function(e){this.canvas=null,this.ctx=null,this.repeat=0,this.frames=[],this.numRenderedFrames=0,this.onRenderCompleteCallback=C,this.onRenderProgressCallback=C,this.workers=[],this.availableWorkers=[],this.generatingGIF=!1,this.options=e,this.initializeWebWorkers(e)};x.prototype={workerMethods:v(),initializeWebWorkers:function(e){var t,r=y.toString()+"("+v.toString()+"());",a=void 0,o=void 0,i=void 0,s=-1,c="";for(t=e.numWorkers;++s<t;)a=l.createWebWorker(r),l.isObject(a)?(o=a.objectUrl,i=a.worker,this.workers.push({worker:i,objectUrl:o}),this.availableWorkers.push(i)):(c=a,l.webWorkerError=!!a);this.workerError=c,this.canvas=n.createElement("canvas"),this.canvas.width=e.gifWidth,this.canvas.height=e.gifHeight,this.ctx=this.canvas.getContext("2d"),this.frames=[]},getWorker:function(){return this.availableWorkers.pop()},freeWorker:function(e){this.availableWorkers.push(e)},byteMap:function(){for(var e=[],t=0;t<256;t++)e[t]=String.fromCharCode(t);return e}(),bufferToString:function(e){for(var t=e.length,r="",a=-1;++a<t;)r+=this.byteMap[e[a]];return r},onFrameFinished:function(e){var t=this,r=t.frames,a=!!(t.options.images||[]).length,n=r.every(function(e){return!e.beingProcessed&&e.done});t.numRenderedFrames++,a&&e(t.numRenderedFrames/r.length),t.onRenderProgressCallback(.75*t.numRenderedFrames/r.length),n?t.generatingGIF||t.generateGIF(r,t.onRenderCompleteCallback):l.requestTimeout(function(){t.processNextFrame()},1)},processFrame:function(e){var t=this,r=(this.options,this.options),a=r.progressCallback,n=r.sampleInterval,o=this.frames,s=void 0,c=void 0,l=function(){var e=(arguments.length>0&&arguments[0]!==i?arguments[0]:{}).data;delete s.data,s.pixels=Array.prototype.slice.call(e.pixels),s.palette=Array.prototype.slice.call(e.palette),s.done=!0,s.beingProcessed=!1,t.freeWorker(c),t.onFrameFinished(a)};(s=o[e]).beingProcessed||s.done?this.onFrameFinished():(s.sampleInterval=n,s.beingProcessed=!0,s.gifshot=!0,(c=this.getWorker())?(c.onmessage=l,c.postMessage(s)):l({data:t.workerMethods.run(s)}))},startRendering:function(e){this.onRenderCompleteCallback=e;for(var t=0;t<this.options.numWorkers&&t<this.frames.length;t++)this.processFrame(t)},processNextFrame:function(){for(var e=-1,t=0;t<this.frames.length;t++){var r=this.frames[t];if(!r.done&&!r.beingProcessed){e=t;break}}e>=0&&this.processFrame(e)},generateGIF:function(e,t){var r=[],a={loop:this.repeat},n=this.options,o=n.interval,i=n.frameDuration,s=!!n.images.length,c=n.gifHeight,d=n.gifWidth,f=new b(r,d,c,a),u=this.onRenderProgressCallback,m=s?100*o:0,g=void 0;this.generatingGIF=!0,l.each(e,function(t,r){var a=r.palette;u(.75+.25*r.position*1/e.length);for(var n=0;n<i;n++)f.addFrame(0,0,d,c,r.pixels,{palette:a,delay:m})}),f.end(),u(1),this.frames=[],this.generatingGIF=!1,l.isFunction(t)&&(g=this.bufferToString(r),t("data:image/gif;base64,"+l.btoa(g)))},setRepeat:function(e){this.repeat=e},addFrame:function(e,t,r){t=l.isObject(t)?t:{};var a=this.ctx,n=this.options,o=n.gifWidth,i=n.gifHeight,s=l.getFontSize(t),c=t,d=c.filter,f=c.fontColor,u=c.fontFamily,m=c.fontWeight,g=(c.gifHeight,c.gifWidth,c.text),h=c.textAlign,p=c.textBaseline,y=c.waterMark,v=c.waterMarkHeight,b=c.waterMarkWidth,C=c.waterMarkXCoordinate,x=c.waterMarkYCoordinate,S=t.textXCoordinate?t.textXCoordinate:"left"===h?1:"right"===h?o:o/2,E=t.textYCoordinate?t.textYCoordinate:"top"===p?1:"center"===p?i/2:i,k=m+" "+s+" "+u,M=r&&t.showFrameText?r:g,w=void 0;try{a.filter=d,a.drawImage(e,0,0,o,i),M&&(a.font=k,a.fillStyle=f,a.textAlign=h,a.textBaseline=p,a.fillText(M,S,E)),y&&a.drawImage(y,C,x,b,v),w=a.getImageData(0,0,o,i),this.addFrameImageData(w)}catch(e){return""+e}},addFrameImageData:function(){var e=arguments.length>0&&arguments[0]!==i?arguments[0]:{},t=this.frames,r=e.data;this.frames.push({data:r,width:e.width,height:e.height,palette:null,dithering:null,done:!1,beingProcessed:!1,position:t.length})},onRenderProgress:function(e){this.onRenderProgressCallback=e},isRendering:function(){return this.generatingGIF},getBase64GIF:function(e){var t=this;t.startRendering(function(r){t.destroyWorkers(),l.requestTimeout(function(){e(r)},0)})},destroyWorkers:function(){if(!this.workerError){var e=this.workers;l.each(e,function(e,t){var r=t.worker,a=t.objectUrl;r.terminate(),l.URL.revokeObjectURL(a)})}}};var S=function(){},E={getGIF:function(){var e=arguments.length>0&&arguments[0]!==i?arguments[0]:{},t=arguments[1];t=l.isFunction(t)?t:S;var r=n.createElement("canvas"),a=void 0,o=!!e.images.length,s=e.cameraStream,c=e.crop,d=e.filter,f=e.fontColor,u=e.fontFamily,m=e.fontWeight,g=e.keepCameraOn,h=(e.numWorkers,e.progressCallback),p=e.saveRenderingContexts,y=e.savedRenderingContexts,v=e.text,b=e.textAlign,C=e.textBaseline,E=e.videoElement,k=e.videoHeight,M=e.videoWidth,w=e.webcamVideoElement,O=e.waterMark,L=e.waterMarkHeight,I=e.waterMarkWidth,N=e.waterMarkXCoordinate,z=e.waterMarkYCoordinate,F=Number(e.gifWidth),B=Number(e.gifHeight),T=Number(e.interval),j=(Number(e.sampleInterval),o?0:1e3*T),R=[],A=y.length?y.length:e.numFrames,W=A,U=new x(e),H=l.getFontSize(e),P=e.textXCoordinate?e.textXCoordinate:"left"===b?1:"right"===b?F:F/2,Y=e.textYCoordinate?e.textYCoordinate:"top"===C?1:"center"===C?B/2:B,V=m+" "+H+" "+u,X=c?Math.floor(c.scaledWidth/2):0,$=c?M-c.scaledWidth:0,q=c?Math.floor(c.scaledHeight/2):0,D=c?k-c.scaledHeight:0;A=A!==i?A:10,T=T!==i?T:.1,r.width=F,r.height=B,a=r.getContext("2d"),function e(){y.length||0!==E.currentTime?function e(){var r=W-1;function n(){var n;p&&R.push(a.getImageData(0,0,F,B)),O&&a.drawImage(O,N,z,I,L),v&&(a.font=V,a.fillStyle=f,a.textAlign=b,a.textBaseline=C,a.fillText(v,P,Y)),n=a.getImageData(0,0,F,B),U.addFrameImageData(n),h((A-(W=r))/A),r>0&&l.requestTimeout(e,j),W||U.getBase64GIF(function(e){t({error:!1,errorCode:"",errorMsg:"",image:e,cameraStream:s,videoElement:E,webcamVideoElement:w,savedRenderingContexts:R,keepCameraOn:g})})}y.length?(a.putImageData(y[A-W],0,0),n()):function e(){try{$>M&&($=M),D>k&&(D=k),X<0&&(X=0),q<0&&(q=0),a.filter=d,a.drawImage(E,X,q,$,D,0,0,F,B),n()}catch(t){if("NS_ERROR_NOT_AVAILABLE"!==t.name)throw t;l.requestTimeout(e,100)}}()}():l.requestTimeout(e,100)}()},getCropDimensions:function(){var e=arguments.length>0&&arguments[0]!==i?arguments[0]:{},t=e.videoWidth,r=e.videoHeight,a=e.gifWidth,n=e.gifHeight,o={width:0,height:0,scaledWidth:0,scaledHeight:0};return t>r?(o.width=Math.round(t*(n/r))-a,o.scaledWidth=Math.round(o.width*(r/n))):(o.height=Math.round(r*(a/t))-n,o.scaledHeight=Math.round(o.height*(t/a))),o}},k={loadedData:!1,defaultVideoDimensions:{width:640,height:480},findVideoSize:function e(t){e.attempts=e.attempts||0;var r=t.cameraStream,a=t.completedCallback,n=t.videoElement;n&&(n.videoWidth>0&&n.videoHeight>0?(n.removeEventListener("loadeddata",k.findVideoSize),a({videoElement:n,cameraStream:r,videoWidth:n.videoWidth,videoHeight:n.videoHeight})):e.attempts<10?(e.attempts+=1,l.requestTimeout(function(){k.findVideoSize(t)},400)):a({videoElement:n,cameraStream:r,videoWidth:k.defaultVideoDimensions.width,videoHeight:k.defaultVideoDimensions.height}))},onStreamingTimeout:function(e){l.isFunction(e)&&e({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - Timed out while trying to start streaming",image:null,cameraStream:{}})},stream:function(e){var t=l.isArray(e.existingVideo)?e.existingVideo[0]:e.existingVideo,r=e.cameraStream,a=e.completedCallback,n=e.streamedCallback,o=e.videoElement;if(l.isFunction(n)&&n(),t){if(l.isString(t))o.src=t,o.innerHTML='<source src="'+t+'" type="video/'+l.getExtension(t)+'" />';else if(t instanceof Blob){try{o.src=l.URL.createObjectURL(t)}catch(e){}o.innerHTML='<source src="'+t+'" type="'+t.type+'" />'}}else if(o.mozSrcObject)o.mozSrcObject=r;else if(l.URL)try{o.srcObject=r,o.src=l.URL.createObjectURL(r)}catch(e){o.srcObject=r}o.play(),l.requestTimeout(function e(){e.count=e.count||0,!0===k.loadedData?(k.findVideoSize({videoElement:o,cameraStream:r,completedCallback:a}),k.loadedData=!1):(e.count+=1)>10?k.findVideoSize({videoElement:o,cameraStream:r,completedCallback:a}):e()},0)},startStreaming:function(e){var t=l.isFunction(e.error)?e.error:l.noop,r=l.isFunction(e.streamed)?e.streamed:l.noop,a=l.isFunction(e.completed)?e.completed:l.noop,o=e.crossOrigin,i=e.existingVideo,s=e.lastCameraStream,c=e.options,d=e.webcamVideoElement,f=l.isElement(i)?i:d||n.createElement("video");o&&(f.crossOrigin=c.crossOrigin),f.autoplay=!0,f.loop=!0,f.muted=!0,f.addEventListener("loadeddata",function(e){k.loadedData=!0,c.offset&&(f.currentTime=c.offset)}),i?k.stream({videoElement:f,existingVideo:i,completedCallback:a}):s?k.stream({videoElement:f,cameraStream:s,streamedCallback:r,completedCallback:a}):l.getUserMedia({video:!0},function(e){k.stream({videoElement:f,cameraStream:e,streamedCallback:r,completedCallback:a})},t)},startVideoStreaming:function(e){var t=arguments.length>1&&arguments[1]!==i?arguments[1]:{},r=t.timeout!==i?t.timeout:0,a=t.callback,n=t.webcamVideoElement,o=void 0;r>0&&(o=l.requestTimeout(function(){k.onStreamingTimeout(a)},1e4)),k.startStreaming({error:function(){a({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - the user probably denied permission",image:null,cameraStream:{}})},streamed:function(){clearTimeout(o)},completed:function(){var t=arguments.length>0&&arguments[0]!==i?arguments[0]:{},r=t.cameraStream,a=t.videoElement,n=t.videoHeight,o=t.videoWidth;e({cameraStream:r,videoElement:a,videoHeight:n,videoWidth:o})},lastCameraStream:t.lastCameraStream,webcamVideoElement:n,crossOrigin:t.crossOrigin,options:t})},stopVideoStreaming:function(e){var t=e=l.isObject(e)?e:{},r=t.keepCameraOn,a=t.videoElement,n=t.webcamVideoElement,o=e.cameraStream||{},i=o.getTracks&&o.getTracks()||[],s=!!i.length,c=i[0];!r&&s&&l.isFunction(c.stop)&&c.stop(),l.isElement(a)&&!n&&(a.pause(),l.isFunction(l.URL.revokeObjectURL)&&!l.webWorkerError&&a.src&&l.URL.revokeObjectURL(a.src),l.removeElement(a))}};function M(e){e=l.isObject(e)?e:{},k.stopVideoStreaming(e)}function w(e,t){var r=e.options||{},a=r.images,o=r.video,i=Number(r.gifWidth),s=Number(r.gifHeight),c=(Number(r.numFrames),e.cameraStream),d=e.videoElement,f=e.videoWidth,u=e.videoHeight,m=E.getCropDimensions({videoWidth:f,videoHeight:u,gifHeight:s,gifWidth:i}),g=t;r.crop=m,r.videoElement=d,r.videoWidth=f,r.videoHeight=u,r.cameraStream=c,l.isElement(d)&&(d.width=i+m.width,d.height=s+m.height,r.webcamVideoElement||(l.setCSSAttr(d,{position:"fixed",opacity:"0"}),n.body.appendChild(d)),d.play(),E.getGIF(r,function(e){a&&a.length||o&&o.length||M(e),g(e)}))}function O(e,t){if(t=l.isFunction(e)?e:t,e=l.isObject(e)?e:{},l.isFunction(t)){var r=l.mergeOptions(g,e)||{},a=e.cameraStream,o=r.images,s=o?o.length:0,c=r.video,d=r.webcamVideoElement;r=l.mergeOptions(r,{gifWidth:Math.floor(r.gifWidth),gifHeight:Math.floor(r.gifHeight)}),s?function(){var e=arguments.length>0&&arguments[0]!==i?arguments[0]:{},t=e.callback,r=e.images,a=e.options,o=e.imagesLength,s=f.validate({getUserMedia:!0,"window.URL":!0}),c=[],d=0,u=void 0,m=void 0;if(s.error)return t(s);function g(){l.each(c,function(e,t){t&&(t.text?m.addFrame(t.img,a,t.text):m.addFrame(t,a))}),function(e,t){e.getBase64GIF(function(e){t({error:!1,errorCode:"",errorMsg:"",image:e})})}(m,t)}m=new x(a),l.each(r,function(e,r){var i=r;r.src&&(i=i.src),l.isElement(i)?(a.crossOrigin&&(i.crossOrigin=a.crossOrigin),c[e]=i,(d+=1)===o&&g()):l.isString(i)&&(u=new Image,a.crossOrigin&&(u.crossOrigin=a.crossOrigin),function(a){r.text&&(a.text=r.text),a.onerror=function(e){var r=void 0;if(0==--o)return(r={}).error="None of the requested images was capable of being retrieved",t(r)},a.onload=function(t){r.text?c[e]={img:a,text:a.text}:c[e]=a,(d+=1)===o&&g(),l.removeElement(a)},a.src=i}(u),l.setCSSAttr(u,{position:"fixed",opacity:"0"}),n.body.appendChild(u))})}({images:o,imagesLength:s,callback:t,options:r}):c?function(){var e=arguments.length>0&&arguments[0]!==i?arguments[0]:{},t=e.callback,r=e.existingVideo,a=e.options,n=f.validate({getUserMedia:!0,"window.URL":!0}),o=void 0,s=void 0;if(n.error)return t(n);if(l.isElement(r)&&r.src){if(s=r.src,o=l.getExtension(s),!l.isSupported.videoCodecs[o])return t(f.messages.videoCodecs)}else l.isArray(r)&&l.each(r,function(e,t){if(o=t instanceof Blob?t.type.substr(t.type.lastIndexOf("/")+1,t.length):t.substr(t.lastIndexOf(".")+1,t.length),l.isSupported.videoCodecs[o])return r=t,!1});k.startStreaming({completed:function(e){e.options=a||{},w(e,t)},existingVideo:r,crossOrigin:a.crossOrigin,options:a})}({existingVideo:c,callback:t,options:r}):function(){var e=arguments.length>0&&arguments[0]!==i?arguments[0]:{},t=e.callback,r=e.lastCameraStream,a=e.options,n=e.webcamVideoElement;if(!p())return t(f.validate());a.savedRenderingContexts.length?E.getGIF(a,function(e){t(e)}):k.startVideoStreaming(function(){var e=arguments.length>0&&arguments[0]!==i?arguments[0]:{};e.options=a||{},w(e,t)},{lastCameraStream:r,callback:t,webcamVideoElement:n,crossOrigin:a.crossOrigin})}({lastCameraStream:a,callback:t,webcamVideoElement:d,options:r})}}var L={utils:d,error:u,defaultOptions:h,createGIF:O,takeSnapShot:function(e,t){if(t=l.isFunction(e)?e:t,e=l.isObject(e)?e:{},l.isFunction(t)){var r=l.mergeOptions(g,e);O(l.mergeOptions(r,{interval:.1,numFrames:1,gifWidth:Math.floor(r.gifWidth),gifHeight:Math.floor(r.gifHeight)}),t)}},stopVideoStreaming:M,isSupported:function(){return f.isValid()},isWebCamGIFSupported:p,isExistingVideoGIFSupported:function(e){var t=!1;if(l.isArray(e)&&e.length){if(l.each(e,function(e,r){l.isSupported.videoCodecs[r]&&(t=!0)}),!t)return!1}else if(l.isString(e)&&e.length&&!l.isSupported.videoCodecs[e])return!1;return f.isValid({getUserMedia:!0})},isExistingImagesGIFSupported:function(){return f.isValid({getUserMedia:!0})},VERSION:"0.4.5"};(a=function(){return L}.apply(t,[]))===i||(e.exports=a)}("undefined"!=typeof window?window:{},"undefined"!=typeof document?document:{createElement:function(){}},"undefined"!=typeof window?window.navigator:{})},function(e,t,r){"use strict";(function(e){var a=r(0),n=r(1);t.a=function(){const t={x:0,y:0};let r=!1;const o=document.getElementById("mainCanvas");a.a.canvas=o;const i=o.getContext("2d");o.addEventListener("mousedown",s=>{t.x=s.pageX-o.offsetLeft,t.y=s.pageY-o.offsetTop,"pen"===a.a.state&&"?"!==a.a.currentColor&&(r=!0,e.console.log(t.x,t.y),i.fillStyle=a.a.currentColor,Object(n.b)(a.a.array,Math.floor(t.y/5),Math.floor(t.x/5),a.a.currentColor),e.console.log(a.a.array),i.fillRect(5*Math.floor(t.x/5),5*Math.floor(t.y/5),5*a.a.penSize,5*a.a.penSize))}),o.addEventListener("mousemove",e=>{if(!0===r&&"pen"===a.a.state){t.x=e.pageX-o.offsetLeft,t.y=e.pageY-o.offsetTop;for(let e=0;e<a.a.penSize;e++)for(let r=0;r<a.a.penSize;r++)Math.floor(t.x/5)+r<a.a.array.length&&Math.floor(t.y/5)+e<a.a.array.length&&(a.a.array[Math.floor(t.y/5)+e][Math.floor(t.x/5)+r]={color:a.a.currentColor});i.fillRect(5*Math.floor(t.x/5),5*Math.floor(t.y/5),5*a.a.penSize,5*a.a.penSize)}"pen"===a.a.state&&(document.onmouseup=()=>{r=!1,document.onmouseup=null})})}}).call(this,r(2))},function(e,t,r){"use strict";(function(e){var a=r(0);t.a=function(){const t={x:0,y:0};let r=!1;const n=document.getElementById("mainCanvas");a.a.canvas=n;const o=n.getContext("2d");n.addEventListener("mousedown",i=>{if(t.x=i.pageX-n.offsetLeft,t.y=i.pageY-n.offsetTop,"verticalMirrorPen"===a.a.state&&"?"!==a.a.currentColor){r=!0,e.console.log(t.x,t.y),o.fillStyle=a.a.currentColor;for(let e=0;e<a.a.penSize;e++)for(let r=0;r<a.a.penSize;r++)a.a.array[Math.floor(t.y/5)+e][Math.floor(t.x/5)+r]={color:a.a.currentColor};for(let e=0;e<a.a.penSize;e++)for(let r=0;r<a.a.penSize;r++)a.a.array[Math.floor(t.y/5)+e][Math.ceil((5*a.a.array.length-t.x)/5)-1-r]={color:a.a.currentColor};o.fillRect(5*Math.floor(t.x/5),5*Math.floor(t.y/5),5*a.a.penSize,5*a.a.penSize),o.fillRect(5*(a.a.array.length-Math.floor(t.x/5))-5*a.a.penSize,5*Math.floor(t.y/5),5*a.a.penSize,5*a.a.penSize)}}),n.addEventListener("mousemove",e=>{if(!0===r&&"verticalMirrorPen"===a.a.state){t.x=e.pageX-n.offsetLeft,t.y=e.pageY-n.offsetTop;for(let e=0;e<a.a.penSize;e++)for(let r=0;r<a.a.penSize;r++)a.a.array[Math.floor(t.y/5)+e][Math.floor(t.x/5)+r]={color:a.a.currentColor};for(let e=0;e<a.a.penSize;e++)for(let r=0;r<a.a.penSize;r++)a.a.array[Math.floor(t.y/5)+e][Math.ceil((5*a.a.array.length-t.x)/5)-1-r]={color:a.a.currentColor};o.fillRect(5*Math.floor(t.x/5),5*Math.floor(t.y/5),5*a.a.penSize,5*a.a.penSize),o.fillRect(5*(a.a.array.length-Math.floor(t.x/5))-5*a.a.penSize,5*Math.floor(t.y/5),5*a.a.penSize,5*a.a.penSize)}"verticalMirrorPen"===a.a.state&&(document.onmouseup=()=>{r=!1,document.onmouseup=null})})}}).call(this,r(2))},function(e,t,r){"use strict";(function(e){var a=r(0);t.a=function(){const t={x:0,y:0};let r=!1;const n=document.getElementById("mainCanvas");a.a.canvas=n;const o=n.getContext("2d");n.addEventListener("mousedown",i=>{if(t.x=i.pageX-n.offsetLeft,t.y=i.pageY-n.offsetTop,"horizontalMirrorPen"===a.a.state&&"?"!==a.a.currentColor){r=!0,e.console.log(t.x,t.y),o.fillStyle=a.a.currentColor;for(let e=0;e<a.a.penSize;e++)for(let r=0;r<a.a.penSize;r++)a.a.array[Math.floor(t.y/5)+e][Math.floor(t.x/5)+r]={color:a.a.currentColor};for(let e=0;e<a.a.penSize;e++)for(let r=0;r<a.a.penSize;r++)a.a.array[Math.ceil((5*a.a.array.length-t.y)/5)-1-e][Math.floor(t.x/5)+r]={color:a.a.currentColor};o.fillRect(5*Math.floor(t.x/5),5*Math.floor(t.y/5),5*a.a.penSize,5*a.a.penSize),o.fillRect(5*Math.floor(t.x/5),5*(a.a.array.length-Math.floor(t.y/5))-5*a.a.penSize,5*a.a.penSize,5*a.a.penSize)}}),n.addEventListener("mousemove",e=>{if(!0===r&&"horizontalMirrorPen"===a.a.state){t.x=e.pageX-n.offsetLeft,t.y=e.pageY-n.offsetTop;for(let e=0;e<a.a.penSize;e++)for(let r=0;r<a.a.penSize;r++)a.a.array[Math.floor(t.y/5)+e][Math.floor(t.x/5)+r]={color:a.a.currentColor};for(let e=0;e<a.a.penSize;e++)for(let r=0;r<a.a.penSize;r++)a.a.array[Math.ceil((5*a.a.array.length-t.y)/5)-1-e][Math.floor(t.x/5)+r]={color:a.a.currentColor};o.fillRect(5*Math.floor(t.x/5),5*Math.floor(t.y/5),5*a.a.penSize,5*a.a.penSize),o.fillRect(5*Math.floor(t.x/5),5*(a.a.array.length-Math.floor(t.y/5))-5*a.a.penSize,5*a.a.penSize,5*a.a.penSize)}"horizontalMirrorPen"===a.a.state&&(document.onmouseup=()=>{r=!1,document.onmouseup=null})})}}).call(this,r(2))},function(e,t,r){"use strict";(function(e){var a=r(0);t.a=function(){const t={x:0,y:0};let r=!1;const n=document.getElementById("mainCanvas");a.a.canvas=n;const o=n.getContext("2d");n.addEventListener("mousedown",i=>{if(t.x=i.pageX-n.offsetLeft,t.y=i.pageY-n.offsetTop,"eraser"===a.a.state&&"?"!==a.a.currentColor){r=!0,e.console.log(t.x,t.y);for(let e=0;e<a.a.penSize;e++)for(let r=0;r<a.a.penSize;r++)a.a.array[Math.floor(t.x/5)+e][Math.floor(t.y/5)+r].color="?";e.console.log(a.a.array),o.clearRect(5*Math.floor(t.x/5),5*Math.floor(t.y/5),5*a.a.penSize,5*a.a.penSize)}}),n.addEventListener("mousemove",e=>{if(!0===r&&"eraser"===a.a.state){t.x=e.pageX-n.offsetLeft,t.y=e.pageY-n.offsetTop;for(let e=0;e<a.a.penSize;e++)for(let r=0;r<a.a.penSize;r++)Math.floor(t.x/5)+r<a.a.array.length&&Math.floor(t.y/5)+e<a.a.array.length&&(a.a.array[Math.floor(t.y/5)+e][Math.floor(t.x/5)+r]={color:"?"});o.clearRect(5*Math.floor(t.x/5),5*Math.floor(t.y/5),5*a.a.penSize,5*a.a.penSize)}"eraser"===a.a.state&&(document.onmouseup=()=>{r=!1,document.onmouseup=null})})}}).call(this,r(2))},function(e,t,r){"use strict";r.r(t);var a=r(0);const n={canvas:"?",array:"?"};var o=function(){!function(){const e=document.getElementById("center"),t=document.getElementById("canvasSizeTemp");let r,n,o;t.addEventListener("click",i=>{"canvasSize"===i.target.className&&(n=+i.target.innerHTML,e.removeChild(t),(o=document.getElementById("mainCanvas")).width=5*n,o.style.width=`${5*n}px`,o.height=5*n,e.style.padding=`${(640-5*n)/2}px`,o.style.border="1px solid white",o.style.opacity="1",function(e){r=new Array(e);for(let t=0;t<e;t++){r[t]=new Array(e);for(let a=0;a<e;a++)r[t][a]={color:"?"}}}(n),a.a.canvas=o,a.a.array=r,a.a.arrayClean=JSON.parse(JSON.stringify(r)),document.getElementById("canvasSizeInformation").innerHTML=` [${a.a.array.length}x${a.a.array.length}]`);const s=document.getElementById("preview").getContext("2d");let c,l=0;setInterval(()=>{const e=document.getElementsByClassName("frame");c=Array.from(e),l<c.length?(s.clearRect(0,0,224,224),s.drawImage(c[l].children[0],0,0),++l>=c.length&&(l=0)):l=0},300)})}()},i=r(3),s=r.n(i);var c=function(){const e=document.getElementById("fullscreen"),t=document.getElementById("preview");e.addEventListener("click",()=>{t.requestFullscreen()})};var l=function(){document.getElementById("canvasSizeInformation");const e=document.getElementById("cursorCoordinatesInformation"),t=document.getElementById("mainCanvas"),r={x:0,y:0};t.addEventListener("mousemove",function(a){r.x=a.pageX-t.offsetLeft,r.y=a.pageY-t.offsetTop,e.innerHTML=`${Math.floor(r.x/5)}:${Math.floor(r.y/5)} `}),t.addEventListener("mouseout",function(t){e.innerHTML=null})},d=r(4),f=r(5),u=r(6),m=r(7);var g=function(){const e={x:0,y:0},t=document.getElementById("mainCanvas");a.a.canvas=t;const r=t.getContext("2d");t.addEventListener("click",n=>{if(e.x=n.pageX-t.offsetLeft,e.y=n.pageY-t.offsetTop,"paintAllPixels"===a.a.state&&"?"!==a.a.currentColor){const t=a.a.array[Math.floor(e.y/5)][Math.floor(e.x/5)].color;for(let e=0;e<a.a.array.length;e++)for(let n=0;n<a.a.array.length;n++)a.a.array[e][n].color===t&&(a.a.array[e][n].color=a.a.currentColor,r.fillStyle=a.a.currentColor,r.fillRect(5*n,5*e,5,5))}})};var h=function(){const e={x:0,y:0},t=document.getElementById("currentColor"),r=document.getElementById("previousColor"),n=document.getElementById("mainCanvas");n.addEventListener("click",o=>{if("colorPicker"===a.a.state){e.x=o.pageX-n.offsetLeft,e.y=o.pageY-n.offsetTop;const i=a.a.array[Math.floor(e.y/5)][Math.floor(e.x/5)].color;a.a.previousColor=a.a.currentColor,a.a.currentColor=i,t.style.backgroundColor=a.a.currentColor,r.style.backgroundColor=a.a.previousColor}})},p=r(1);var y=function(){const e={x:0,y:0},t=document.getElementById("mainCanvas"),r={start:"?",finish:"?"};t.addEventListener("mousedown",n=>{"stroke"===a.a.state&&(e.x=n.pageX-t.offsetLeft,e.y=n.pageY-t.offsetTop,r.start={y:Math.floor(e.y/5),x:Math.floor(e.x/5)})}),t.addEventListener("mouseup",n=>{if("stroke"===a.a.state){function o(e,t){for(;e>0&&t>0;){let a;e-=a=t%2?Math.floor(e/t):Math.ceil(e/t),t--,r.array.push(a)}r.arraySum=r.array.reduce((e,t)=>e+t)}if(e.x=n.pageX-t.offsetLeft,e.y=n.pageY-t.offsetTop,r.finish={y:Math.floor(e.y/5),x:Math.floor(e.x/5)},r.finish.x-r.start.x>0?r.distanceX=1+r.finish.x-r.start.x:r.distanceX=-1+r.finish.x-r.start.x,r.finish.y-r.start.y>0?r.distanceY=1+r.finish.y-r.start.y:r.distanceY=-1+r.finish.y-r.start.y,r.array=[],Math.abs(r.distanceX)>Math.abs(r.distanceY))if(o(Math.abs(r.distanceX),Math.abs(r.distanceY)),r.distanceY>0){let e=0;if(r.distanceX>0)for(let t=0;t<r.distanceY;t++)for(let n=0;n<r.array[t];n++)Object(p.b)(a.a.array,r.start.y+t,r.start.x+e,a.a.currentColor),a.a.array[r.start.y+t][r.start.x+e].color=a.a.currentColor,e++;else for(let t=0;t<r.distanceY;t++)for(let n=0;n<r.array[t];n++)Object(p.b)(a.a.array,r.start.y+t,r.start.x+e,a.a.currentColor),a.a.array[r.start.y+t][r.start.x+e].color=a.a.currentColor,e--}else{let e=0;if(r.distanceX>0)for(let t=0;t<Math.abs(r.distanceY);t++)for(let n=0;n<r.array[t];n++)Object(p.b)(a.a.array,r.start.y-t,r.start.x+e,a.a.currentColor),a.a.array[r.start.y-t][r.start.x+e].color=a.a.currentColor,e++;else for(let t=0;t<Math.abs(r.distanceY);t++)for(let n=0;n<r.array[t];n++)Object(p.b)(a.a.array,r.start.y-t,r.start.x+e,a.a.currentColor),a.a.array[r.start.y-t][r.start.x+e].color=a.a.currentColor,e--}else if(o(Math.abs(r.distanceY),Math.abs(r.distanceX)),r.distanceY>0){let e=0;if(r.distanceX>0)for(let t=0;t<r.distanceY;t++)for(let n=0;n<r.array[t];n++)Object(p.b)(a.a.array,r.start.y+e,r.start.x+t,a.a.currentColor),a.a.array[r.start.y+e][r.start.x+t].color=a.a.currentColor,e++;else for(let t=0;t<r.distanceY;t++)for(let n=0;n<r.array[t];n++)Object(p.b)(a.a.array,r.start.y+e,r.start.x-t,a.a.currentColor),a.a.array[r.start.y+e][r.start.x-t].color=a.a.currentColor,e++}else{let e=0;if(r.distanceX>0)for(let t=0;t<Math.abs(r.distanceY);t++)for(let n=0;n<r.array[t];n++)Object(p.b)(a.a.array,r.start.y+e,r.start.x+t,a.a.currentColor),a.a.array[r.start.y+e][r.start.x+t].color=a.a.currentColor,e--;else for(let t=0;t<Math.abs(r.distanceY);t++)for(let n=0;n<r.array[t];n++)Object(p.b)(a.a.array,r.start.y+e,r.start.x-t,a.a.currentColor),a.a.array[r.start.y+e][r.start.x-t].color=a.a.currentColor,e--}a.a.canvas=t;const i=t.getContext("2d");i.clearRect(0,0,5*a.a.array.length,5*a.a.array.length);for(let e=0;e<a.a.array.length;e++)for(let t=0;t<a.a.array.length;t++)"?"!==a.a.array[e][t].color&&(i.fillStyle=a.a.array[e][t].color,i.fillRect(5*t,5*e,5,5))}})};var v=function(){const e={x:0,y:0},t=document.getElementById("mainCanvas"),r={start:"?",finish:"?",vertex:{y:"?",x:"?"}};t.addEventListener("mousedown",n=>{"rectangle"===a.a.state&&(e.x=n.pageX-t.offsetLeft,e.y=n.pageY-t.offsetTop,r.start={y:Math.floor(e.y/5),x:Math.floor(e.x/5)})}),t.addEventListener("mouseup",n=>{if("rectangle"===a.a.state){e.x=n.pageX-t.offsetLeft,e.y=n.pageY-t.offsetTop,r.finish={y:Math.floor(e.y/5),x:Math.floor(e.x/5)},r.distanceX=Math.abs(r.finish.x-r.start.x),r.distanceY=Math.abs(r.finish.y-r.start.y),r.start.y<r.finish.y?r.vertex.y=r.start.y:r.vertex.y=r.finish.y,r.start.x<r.finish.x?r.vertex.x=r.start.x:r.vertex.x=r.finish.x;for(let e=0;e<=r.distanceY;e++)Object(p.b)(a.a.array,r.vertex.y+e,r.vertex.x,a.a.currentColor),Object(p.b)(a.a.array,r.vertex.y+e,r.vertex.x+r.distanceX,a.a.currentColor);for(let e=0;e<=r.distanceX;e++)Object(p.b)(a.a.array,r.vertex.y,r.vertex.x+e,a.a.currentColor),Object(p.b)(a.a.array,r.vertex.y+r.distanceY,r.vertex.x+e,a.a.currentColor);a.a.canvas=t;const o=t.getContext("2d");o.clearRect(0,0,5*a.a.array.length,5*a.a.array.length);for(let e=0;e<a.a.array.length;e++)for(let t=0;t<a.a.array.length;t++)"?"!==a.a.array[e][t].color&&(o.fillStyle=a.a.array[e][t].color,o.fillRect(5*t,5*e,5,5))}})};var b=function(){const e={x:0,y:0},t=document.getElementById("mainCanvas"),r=t.getContext("2d");function n(n){if("lighten"===a.a.state){e.x=n.pageX-t.offsetLeft,e.y=n.pageY-t.offsetTop;const o=a.a.array[Math.floor(e.y/5)][Math.floor(e.x/5)],i=/\d+/gi,s=o.color.match(i);for(let e=0;e<s.length;e++)s[e]<240?s[e]=+s[e]+15:s[e]=255;o.color=`rgb(${s[0]}, ${s[1]}, ${s[2]})`;for(let t=0;t<a.a.penSize;t++)for(let n=0;n<a.a.penSize;n++)a.a.array[Math.floor(e.y/5)+t][Math.floor(e.x/5)+n]={color:o.color},Object(p.a)(r,Math.floor(e.y/5)+t,Math.floor(e.x/5)+n,o.color)}}t.addEventListener("mousedown",e=>{n(e),t.addEventListener("mousemove",function e(r){n(r),document.addEventListener("mouseup",function r(a){n(a),t.removeEventListener("mousemove",e),document.removeEventListener("mouseup",r)})})})};function C(e,t,r,n){let o=0,i=a.a.penSize;a.a.penSize%2==0&&(i+=1);for(let s=0;s<i;s++)for(let c=0;c<i;c++)o<1?(e[t+s][r+c]={color:a.a.currentColor},n.fillStyle=a.a.currentColor,n.fillRect(5*(r+c),5*(t+s),i,i),o++):(e[t+s][r+c]={color:a.a.previousColor},n.fillStyle=a.a.previousColor,n.fillRect(5*(r+c),5*(t+s),i,i),o=0)}var x=function(){const e={x:0,y:0};let t=!1;const r=document.getElementById("mainCanvas");a.a.canvas=r;const n=r.getContext("2d");r.addEventListener("mousedown",o=>{e.x=o.pageX-r.offsetLeft,e.y=o.pageY-r.offsetTop,"dithering"===a.a.state&&"?"!==a.a.currentColor&&(t=!0,C(a.a.array,Math.floor(e.y/5),Math.floor(e.x/5),n))}),r.addEventListener("mousemove",o=>{!0===t&&"dithering"===a.a.state&&(e.x=o.pageX-r.offsetLeft,e.y=o.pageY-r.offsetTop,C(a.a.array,Math.floor(e.y/5),Math.floor(e.x/5),n)),"dithering"===a.a.state&&(document.onmouseup=()=>{t=!1,document.onmouseup=null})})};o(),Object(a.b)(),Object(a.c)(),c(),l(),Object(d.a)(),Object(f.a)(),Object(u.a)(),Object(m.a)(),g(),h(),y(),v(),b(),x(),function(){const e=document.getElementById("mainCanvas");e.addEventListener("mousedown",()=>{document.addEventListener("mouseup",function e(){const t=document.getElementById("current"),r=t.getContext("2d");Object(p.c)(a.a.array,r,128/a.a.array.length,a.a.array.length),a.a.frames[`${t.parentElement.id}`]=JSON.parse(JSON.stringify(a.a.array)),document.removeEventListener("mouseup",e)})}),e.addEventListener("click",()=>{const e=document.getElementById("current"),t=e.getContext("2d");Object(p.c)(a.a.array,t,128/a.a.array.length,a.a.array.length),a.a.frames[`${e.parentElement.id}`]=JSON.parse(JSON.stringify(a.a.array))});const t=document.getElementById("addFrame");t.addEventListener("click",()=>{const r=document.getElementById("frames"),n=document.getElementById("current");a.a.frames[n.parentElement.id]=JSON.parse(JSON.stringify(a.a.array)),a.a.array=JSON.parse(JSON.stringify(a.a.arrayClean)),e.getContext("2d").clearRect(0,0,5*a.a.array.length,5*a.a.array.length),null!==n&&n.removeAttribute("id");const o=document.createElement("div");o.className="frame";const i=Object.keys(a.a.frames);o.id=`frame_${+i[i.length-1].match(/\d+/)+1}`,r.insertBefore(o,t),a.a.frames[o.id]=JSON.parse(JSON.stringify(a.a.array));const s=document.createElement("canvas");s.className=`canvas canvas_${+i[i.length-1].match(/\d+/)+1}`,s.id="current",s.width=128,s.height=128,o.appendChild(s);const c=document.createElement("div");c.className="framesFunctions copy",o.appendChild(c);const l=document.createElement("div");l.className="framesFunctions delete",o.appendChild(l);const d=document.createElement("div");d.className="framesFunctions move",o.appendChild(d);const f=document.createElement("div");f.className="framesFunctions number",f.innerHTML=`${+i[i.length-1].match(/\d+/)+1}`,o.appendChild(f)});const r=document.getElementById("frames");r.addEventListener("click",t=>{let n=Object.keys(a.a.frames),o=Object.values(a.a.frames);if(n.length>1){if("framesFunctions delete"===t.target.className)if(delete a.a.frames[t.target.parentNode.id],"current"===t.target.parentElement.children[0].id){r.removeChild(t.target.parentNode),n=Object.keys(a.a.frames),o=Object.values(a.a.frames),r.children[n.length-1].firstElementChild.setAttribute("id","current");const i=e.getContext("2d");a.a.array=o[o.length-1],Object(p.c)(a.a.array,i,5,a.a.array.length)}else r.removeChild(t.target.parentNode)}else{a.a.array=JSON.parse(JSON.stringify(a.a.arrayClean));let r=e.getContext("2d");r.clearRect(0,0,5*a.a.array.length,5*a.a.array.length),(r=t.target.parentElement.children[0].getContext("2d")).clearRect(0,0,5*a.a.array.length,5*a.a.array.length)}}),r.addEventListener("click",e=>{let t=Object.keys(a.a.frames);if("framesFunctions copy"===e.target.className){const n=document.createElement("div");n.className="frame",t=Object.keys(a.a.frames),n.id=`frame_${+t[t.length-1].match(/\d+/)+1}`,r.insertBefore(n,e.target.parentElement),a.a.frames[n.id]=JSON.parse(JSON.stringify(a.a.frames[e.target.parentElement.id]));const o=document.createElement("canvas");o.className=`canvas canvas_${+t[t.length-1].match(/\d+/)+1}`,o.width=128,o.height=128,n.appendChild(o);const i=o.getContext("2d");Object(p.c)(a.a.frames[n.id],i,128/a.a.array.length,a.a.array.length);const s=document.createElement("div");s.className="framesFunctions copy",n.appendChild(s);const c=document.createElement("div");c.className="framesFunctions delete",n.appendChild(c);const l=document.createElement("div");l.className="framesFunctions move",n.appendChild(l);const d=document.createElement("div");d.className="framesFunctions number",d.innerHTML=`${+t[t.length-1].match(/\d+/)+1}`,n.appendChild(d)}}),r.addEventListener("click",t=>{if(128===t.target.width&&"current"!==t.target.id){const r=document.getElementById("current"),n=e.getContext("2d");a.a.array=JSON.parse(JSON.stringify(a.a.frames[t.target.parentElement.id])),n.clearRect(0,0,5*a.a.array.length,5*a.a.array.length),Object(p.c)(a.a.array,n,5,a.a.array.length),r.removeAttribute("id"),t.target.id="current"}})}(),document.getElementById("settingsIconSave").addEventListener("click",()=>{const e=Object.values(a.a.frames);function t(e,t,r,a){t.clearRect(0,0,a*r,a*r);for(let n=0;n<a;n++)for(let o=0;o<a;o++)"?"===e[n][o].color?t.fillStyle="black":t.fillStyle=e[n][o].color,t.fillRect(o*r,n*r,r,r)}const r=[];for(let a=0;a<e.length;a++){const n=document.createElement("img"),o=document.createElement("canvas"),i=o.getContext("2d");o.width=5*e[a].length,o.height=5*e[a].length,t(e[a],i,5,e[a].length);const s=o.toDataURL();n.src=s,r.push(n)}s.a.createGIF({gifWidth:640,gifHeight:640,images:r,interval:.3,numFrames:10,frameDuration:1,fontWeight:"normal",fontSize:"16px",fontFamily:"sans-serif",fontColor:"#ffffff",textAlign:"center",textBaseline:"bottom",sampleInterval:10,numWorkers:2},e=>{if(!e.error){const{image:t}=e,r=document.createElement("img");r.src=t,window.location.href=r.src.replace("image/gif","image/octet-stream")}})}),function(){const e={pen:"p",eraser:"e",verticalMirrorPen:"v",horizontalMirrorPen:"h",paintBucket:"b",paintAllPixels:"a",move:"m",stroke:"s",rectangle:"r",circle:"c",rectangleSelection:"n",lassoSelection:"m",lighten:"l",dithering:"d",colorPicker:"z"};function t(t){const r=document.getElementsByClassName("instrumentsCurrent"),n=Array.from(r);switch(n.length>0&&(n[0].className="instruments"),t.key){case e.pen:a.a.state="pen";break;case e.eraser:a.a.state="eraser";break;case e.verticalMirrorPen:a.a.state="verticalMirrorPen";break;case e.horizontalMirrorPen:a.a.state="horizontalMirrorPen";break;case e.paintBucket:a.a.state="paintBucket";break;case e.paintAllPixels:a.a.state="paintAllPixels";break;case e.move:a.a.state="move";break;case e.stroke:a.a.state="stroke";break;case e.rectangle:a.a.state="rectangle";break;case e.circle:a.a.state="circle";break;case e.rectangleSelection:a.a.state="rectangleSelection";break;case e.lassoSelection:a.a.state="lassoSelection";break;case e.lighten:a.a.state="lighten";break;case e.dithering:a.a.state="dithering";break;case e.colorPicker:a.a.state="colorPicker"}document.getElementById(a.a.state).className="instrumentsCurrent"}document.addEventListener("keypress",t);const r=Object.keys(e);let n=Object.values(e);document.getElementById("keyBoard").addEventListener("click",()=>{const a=document.createElement("div");a.className="keyBoardBox";const o=document.getElementsByTagName("main"),i=Array.from(o)[0];i.appendChild(a);const s=document.createElement("h3");s.className="keyBoardBoxHead",a.appendChild(s);const c=document.createElement("span");c.innerHTML="Keyboard Shortcuts",s.appendChild(c);const l=document.createElement("span");l.innerHTML="X",l.className="keyBoardBoxClose",l.id="keyBoardBoxClosev",s.appendChild(l);const d=document.createElement("ul");a.appendChild(d);for(let e=0;e<r.length;e++){const t=document.createElement("li");t.className=`LI${e}`,d.appendChild(t);const a=document.createElement("div");a.className=`image LI${r[e]}`,t.appendChild(a);const o=document.createElement("div");o.className="LIkeys",o.innerHTML=n[e].toUpperCase(),t.appendChild(o);const i=document.createElement("div");i.className="LIdescription",i.innerHTML=`${r[e]} tool`.toUpperCase(),t.appendChild(i)}document.addEventListener("click",function o(s){function c(){for(let t=0;t<n.length;t++){const a=document.getElementsByClassName("LIkeys"),o=Array.from(a);n=Object.values(e),e[r[t]]=o[t].innerHTML.toLowerCase()}}if(document.removeEventListener("keypress",t),s.target===l&&(i.removeChild(a),document.addEventListener("keypress",t),document.removeEventListener("click",o)),"LIkeys"===s.target.className||"LIkeys blink"===s.target.className){const a=n.indexOf(s.target.innerHTML.toLowerCase()),o=r[a];e[o]="?",c(),s.target.className="LIkeys blink",document.addEventListener("keypress",function e(r){const a=document.getElementsByClassName("LIkeys"),o=Array.from(a);-1===n.indexOf(r.key)?(s.target.innerHTML=r.key.toUpperCase(),s.target.className="LIkeys",document.removeEventListener("keypress",e),document.addEventListener("keypress",t),c()):(o[n.indexOf(r.key)].innerHTML="?",o[n.indexOf(r.key)].className="LIkeys blink",c(),s.target.innerHTML=r.key.toUpperCase(),s.target.className="LIkeys",c(),document.removeEventListener("keypress",e),document.addEventListener("keypress",t))})}})})}(),document.getElementById("saveLocal").addEventListener("click",()=>{localStorage.setItem("instrument",JSON.stringify(a.a)),localStorage.setItem("canvas",JSON.stringify(n))}),document.getElementById("loadLocal").addEventListener("click",()=>{const e=JSON.parse(localStorage.instrument),t=Object.keys(e),r=Object.values(e),n=document.getElementById("mainCanvas");for(let e=0;e<t.length;e++)a.a[t[e]]=r[e];!function(e){const t=document.getElementById("center"),r=document.getElementById("canvasSizeTemp");r&&(t.removeChild(r),n.width=5*e,n.style.width=`${5*e}px`,n.height=5*e,t.style.padding=`${(640-5*e)/2}px`,n.style.border="1px solid white",n.style.opacity="1")}(a.a.frames[Object.keys(a.a.frames)[0]].length);const o=Object.keys(a.a.frames),i=Object.values(a.a.frames);function s(e){const t=document.getElementById("addFrame"),r=document.getElementById("frames"),n=document.getElementById("current");null!==n&&n.removeAttribute("id");const s=document.createElement("div");s.className="frame",s.id=o[e],r.insertBefore(s,t);const c=document.createElement("canvas");c.className=`canvas canvas_${+o[e].match(/\d+/)}`,c.width=128,c.height=128,c.id="current",s.appendChild(c);const l=c.getContext("2d");Object(p.c)(i[e],l,c.width/i[e].length,i[e].length),a.a.array=JSON.parse(JSON.stringify(i[e]));const d=document.createElement("div");d.className="framesFunctions copy",s.appendChild(d);const f=document.createElement("div");f.className="framesFunctions delete",s.appendChild(f);const u=document.createElement("div");u.className="framesFunctions move",s.appendChild(u);const m=document.createElement("div");m.className="framesFunctions number",m.innerHTML=`${+o[e].match(/\d+/)}`,s.appendChild(m)}!function(){const e=document.getElementById("frames"),t=document.getElementById("addFrame");for(;e.firstChild!==t;)e.removeChild(e.firstChild)}();for(let e=0;e<o.length;e++)s(e);const c=n.getContext("2d"),l=i[i.length-1];Object(p.c)(l,c,n.width/l.length,l.length),function(){const e=document.getElementsByClassName("penSizeCurrent");if(0!==e.length){const t=Array.from(e);t[0].className="penSize",t[0].children[0].className="square"}const t=document.getElementsByClassName("penSize"),r=Array.from(t);r[a.a.penSize-1].className="penSizeCurrent",r[a.a.penSize-1].children[0].className="squareCurrent"}(),function(){const e=document.getElementsByClassName("instrumentsCurrent");0!==e.length&&(Array.from(e)[0].className="instruments");const t=document.getElementsByClassName("instruments"),r=Array.from(t);for(let e=0;e<r.length;e++)r[e].innerHTML===a.a.state&&(r[e].className="instrumentsCurrent")}(),document.getElementById("currentColor").style.backgroundColor=a.a.currentColor,document.getElementById("previousColor").style.backgroundColor=a.a.previousColor,function(){const e=document.getElementById("preview").getContext("2d");let t,r=0;setInterval(()=>{const a=document.getElementsByClassName("frame");t=Array.from(a),r<t.length?(e.clearRect(0,0,224,224),e.drawImage(t[r].children[0],0,0),++r>=t.length&&(r=0)):r=0},300)}()})}]);
//# sourceMappingURL=app.bundle.js.map